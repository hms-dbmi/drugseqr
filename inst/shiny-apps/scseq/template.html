<!DOCTYPE html>
<!-- template.html -->

<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <script type="application/shiny-singletons"></script>
  <script type="application/html-dependencies">json2[2014.02.04];jquery[1.12.4];shiny[1.3.2];miniUI[0.1.1.1];selectize[0.11.2];font-awesome[5.3.1];shinyBS[0.61];bootstrap[3.3.7]</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/json2/20140204/json2.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.11.2/css/selectize.bootstrap3.min.css" rel="stylesheet">
  
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.11.2/js/standalone/selectize.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.3.1/css/all.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.3.1/css/v4-shims.min.css" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <style type="text/css">
    html, body { width: 100%; height: 100%; }
    body { padding: 0px; margin: 0; }
  </style>
  <!-- local styles/js -->
  <link href="shared/shiny.css" rel="stylesheet">
  <script src="shared/shiny.min.js"></script>
  <script src="shinyjs/inject.js"></script>
  <!-- custom styles/js -->
  <link type="text/css" rel="stylesheet" href="custom.css"/>
  <script src="contrasts.js"></script>
  
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  
  <body>
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container-fluid">
        <div class="navbar-header">
        </div>
      </div>
    </nav>
    <div class="container-fluid">
      
      <div class="row">
        <div class="col-sm-6">
          <!-- analysis selection (e.g. sjia_pbmcs2) -->
          <div class="form-group selectize-fh">
            <label class="control-label" for="selected_anal">Select a dataset:</label>
            <div class="input-group">
              <div>
                <select id="selected_anal"></select>
                <script type="application/json" data-for="selected_anal" data-nonempty="">{}</script>
              </div>
              <span class="input-group-btn">
                {{ show_integration }}
              </span>
            </div>
          </div>
          <!-- integrate datasets selection (e.g. ctrl and test datasets to combine) -->
          <div id='integration-form' class="well-form" style="display: none;">
            {{ test_integration }}
            {{ ctrl_integration }}
            <label class="control-label" ></label> 
            <div class="validate-wrapper">
              {{ submit_integration }}
              <span class="help-block">Username is taken</span>
            </div>
          </div>
          <br/>
          <!-- cluster (e.g. cell type) selection -->
          <div data-display-if="(input.rename_cluster + input.show_rename) % 2 == 0" data-ns-prefix="">
            <div class="form-group selectize-fh">
              <label class="control-label" for="selected_cluster">Show marker genes for:</label>
              <div class="input-group">
                <div>
                  <select id="selected_cluster"></select> 
                  <script type="application/json" data-for="selected_cluster">{}</script>
                </div>
                <span class="input-group-btn">
                  {{ show_contrasts }}
                </span>
                <span class="input-group-btn">
                  {{ show_rename }}
                </span>
              </div>
            </div>
          </div>
          <!-- input for renaming a cluster -->
          <div data-display-if="(input.rename_cluster + input.show_rename) % 2 != 0" data-ns-prefix="">
            <div class="form-group selectize-fh">
              <label class="control-label" for="new_cluster_name">New cluster name:</label>
              <div class="input-group">
                <input id="new_cluster_name" type="text" class="form-control shiny-bound-input" value="" placeholder="">
                <span class="input-group-btn">
                  {{ rename_cluster }}
                </span>
              </div>
            </div>
          </div>
          <br/>
          <!-- input for selecting the gene to show expression for -->
          <div class="form-group selectize-fh">
            <label class="control-label" for="gene">Show expression for:</label>
            <div class="input-group">
              <div>
                <select id="gene"></select> 
                <script type="application/json" data-for="gene">{}</script>
              </div>
              <span class="input-group-btn">
                {{ genecards }}
              </span>
            </div>
          </div>
          <br/>
          <div id="groups_toggle" class="shiny-html-output"></div>
        </div>
        <!-- plot of cell clusters -->
        <div class="col-sm-6">
          {{ cluster_plot }}
        </div>
      </div>
      <hr/>
      <!-- plot of marker genes -->
      <div class="col-sm-6 col-lg-6 col-lg-push-6">
        {{ marker_plot }}
      </div>
      <!-- BioGPS plot -->
      <div class="col-sm-6 col-lg-6 col-lg-pull-6">
        {{ biogps_plot }}
      </div>
    </div>
  </body>
  </html>