# Transcript to Gene Mapping -----

# install bioawk
sudo apt install bison
git clone git://github.com/lh3/bioawk.git && cd bioawk && make && mv awk bioawk && sudo cp bioawk /usr/local/bin/

# Downloading GTF and extracting Txp to Gene mapping
wget -nv ftp://ftp.ebi.ac.uk/pub/databases/gencode/Gencode_human/release_29/gencode.v29.annotation.gtf.gz

# transcript to ensembl gene tsv
# bioawk -c gff '$feature=="transcript" {print $attribute}' <(gunzip -c gencode.v29.annotation.gtf.gz) | awk -F ' ' '{print substr($4,2,length($4)-3) "\t" substr($2,2,length($2)-3)}' - > /home/alex/Documents/Batcave/zaklab/drugseqr/inst/extdata/txp2gene.tsv

# transcript to hgnc symbol tsv
bioawk -c gff '$feature=="transcript" {print $attribute}' <(gunzip -c gencode.v29.annotation.gtf.gz) | awk -F ' ' '{print substr($4,2,length($4)-3) "\t" substr($8,2,length($8)-3)}' - > /home/alex/Documents/Batcave/zaklab/drugseqr/inst/extdata/txp2hgnc.tsv
